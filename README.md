# Slack Attendance Bot
Slack Attendance Botは、Slack上で出退勤や休憩の通知を任意のチャンネルへ投稿するアプリです。

![](/assets/1.png)

## 機能 
- 出勤、退勤、休憩の開始、終了をSlackの任意のチャンネルへ投稿。  
  会社やチームの文化によって２つの投稿タイプの選択が可能。
  - チャンネルへ直接投稿するタイプ（例:勤怠専用チャンネル）
  - 特定のスレッド内に投稿するタイプ（例:チームチャンネルの勤怠スレッド）
- Botとしてではなく、ユーザとして投稿するため、`from:@ユーザ名`で検索が可能。
- 出勤時にプロフィールのステータス絵文字を変更（出社・在宅など）
- 投稿する際のメッセージは個人ごとに変更可能。

## 必要な環境
- Docker Composeが使用できるサーバ（PythonとMySQLを使用）
- ユーザトークンを取得するためにOAuth認証を行うために、アクセス可能なドメインを持っていること

## 仕様など
- データベースはMySQLを使用し、ユーザトークンは暗号化して保存

## 使い方
### 初回セットアップ
```shell
# 本リポジトリのクローン
git clone https://github.com/yourusername/slack-attendance-bot.git
cd slack-attendance-bot
cp .env.sample .env
# 任意のエディタで.envの内容を修正
nano .env
```

## .envの設定



### Docker関連の操作
```shell
### 起動
docker-compose up -d
### 停止
docker-compose stop
### コンテナ削除
docker-compose down
### .envを修正したりGit最新化を行った場合
docker-compose down && docker-compose up -d --build
```

## Slack　ユーザトークンの取得の際の権限について
本Slackアプリでは、ユーザトークンと以下の権限が必要です。
なお、当然ながらデータベースは使用者の環境に保存されるため、本アプリ制作者にデータが送信されることは一切ありません。
- `chat:write` :ユーザとしてメッセージを投稿するため
- `users.profile:read` :ユーザのプロフィール情報を取得するため
- `users.profile:write` :ユーザのプロフィール情報を変更するため
- `search:read`　: スレッド投稿タイプを使用する際に、該当のスレッドを検索するため
- `channels:read` : チャンネルの一覧情報を取得するため

## 開発方針について
本アプリは以下の方針に基づいて開発しています。
- 機能追加の要望やバグ報告はIssueやPull Requestで受け付けています。
- Slackアプリを使用する企業であれば、どの組織でも汎用的に利用できることを目指しています。  
  そのため、特定の組織や団体でしか使えない機能は実装しないようにしています。


## 注意事項・免責事項
- 本アプリを使用したことによるいかなる損害に対しても、制作者は一切の責任を負いません。
- 本アプリは、使用者（本リポジトリをクローンした人）がセットアップしたデータベース内にユーザトークンを暗号化して保存します。
  各種トークンやシークレット情報の取り扱いには十分注意してください。
- 本アプリは、SlackのAPIを使用しています。そのため、SlackのAPIが変更された場合、本アプリの動作が保証されない可能性があります。
- 本アプリは、MITライセンスで公開されています。商用利用や改変、再配布が可能ですが、その際の責任は負いかねます。